import{r as i,j as e,R as oe}from"./react-DOKUib4L.js";import{R as Ie}from"./react-dom-BITIQLb-.js";import{L as _,O as le,N as Re,u as se,a as ce,b as _e,c as Le,d as Te,R as Ae,e as k}from"./react-router-BxJrM2TX.js";import{a as F,c as H,P as ke}from"./react-redux-C2QVzL3I.js";import{a as W}from"./axios-xsH4HHeE.js";import{M as Pe,L as ne,U as re,a as V,b as ae,c as De,X as ze,d as te,e as q,E as G,f as $,W as Oe,H as Fe,P as Be}from"./lucide-react-CwMC57Za.js";import{c as de,f as ue,a as Me,b as qe,s as Ge}from"./@reduxjs-DTCXBYW2.js";import{S as I}from"./sweetalert2-9Qm2jZ7z.js";import"./cookie-BX9QSSmL.js";import"./scheduler-SPyfQU6S.js";import"./use-sync-external-store-ruIS0Fp4.js";import"./redux-BXkGT1VS.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./@standard-schema-DjkmAgHD.js";import"./reselect-utOO-l3Z.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const p of o.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const me="USER_REGISTER_REQUEST",he="USER_REGISTER_SUCCESS",pe="USER_REGISTER_FAIL",$e="USER_REGISTER_RESET",xe="USER_SIGNIN_REQUEST",Z="USER_SIGNIN_SUCCESS",je="USER_SIGNIN_FAIL",Qe="USER_SIGNIN_RESET",fe="USER_SIGNOUT",ge="USER_DETAILS_REQUEST",Se="USER_DETAILS_SUCCESS",Ce="USER_DETAILS_FAIL",Ve="USER_DETAILS_RESET",He="USER_LIST_REQUEST",We="USER_LIST_SUCCESS",Ze="USER_LIST_FAIL",ve="USER_UPDATE_PROFILE_REQUEST",ye="USER_UPDATE_PROFILE_SUCCESS",Ne="USER_UPDATE_PROFILE_FAIL",M="USER_UPDATE_PROFILE_RESET",Je="USER_UPDATE_REQUEST",Ye="USER_UPDATE_SUCCESS",Ke="USER_UPDATE_FAIL",Xe="USER_UPDATE_RESET",es=(t,s,r)=>async a=>{a({type:me,payload:{nombre:t,email:s,password:r}});try{const{data:n}=await W.post("/api/users/register",{nombre:t,email:s,password:r});a({type:he,payload:n}),a({type:Z,payload:n}),localStorage.setItem("userInfo",JSON.stringify(n))}catch(n){a({type:pe,payload:n.response&&n.response.data.message?n.response.data.message:n.message})}},ss=(t,s)=>async r=>{r({type:xe,payload:{email:t,password:s}});try{const{data:a}=await W.post("/api/users/signin",{email:t,password:s});r({type:Z,payload:a}),localStorage.setItem("userInfo",JSON.stringify(a))}catch(a){r({type:je,payload:a.response&&a.response.data.message?a.response.data.message:a.message})}},ts=()=>t=>{localStorage.removeItem("userInfo"),localStorage.removeItem("cartItems"),localStorage.removeItem("shippingAddress"),t({type:fe}),document.location.href="/signin"},ns=t=>async(s,r)=>{s({type:ge,payload:t});const{userSignin:{userInfo:a}}=r();try{const{data:n}=await W.get(`/api/users/${t}`,{headers:{Authorization:`Bearer ${a.token}`}});s({type:Se,payload:n})}catch(n){const o=n.response&&n.response.data.message?n.response.data.message:n.message;s({type:Ce,payload:o})}},rs=t=>async(s,r)=>{s({type:ve,payload:t});const{userSignin:{userInfo:a}}=r();try{const{data:n}=await W.put("/api/users/profile",t,{headers:{Authorization:`Bearer ${a.token}`}});s({type:ye,payload:n}),s({type:Z,payload:n}),localStorage.setItem("userInfo",JSON.stringify(n))}catch(n){const o=n.response&&n.response.data.message?n.response.data.message:n.message;s({type:Ne,payload:o})}};function as(){const t=F(x=>x.userSignin),{userInfo:s}=t,r=H(),[a,n]=i.useState(!1),[o,p]=i.useState(!1),[N,h]=i.useState(()=>document.body.getAttribute("data-theme")||"light"),l=()=>{p(!1),r(ts()),n(!1)},u=()=>{h(x=>{const S=x==="light"?"dark":"light";return S==="dark"?document.body.setAttribute("data-theme","dark"):document.body.removeAttribute("data-theme"),S})};return i.useEffect(()=>{a?document.body.style.overflow="hidden":document.body.style.overflow="auto"},[a]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"display-grid",children:[e.jsx("div",{className:"header",children:e.jsxs("div",{className:"header-container",children:[e.jsxs("div",{className:"header-left",children:[s&&e.jsx("button",{className:"hamburger-menu",onClick:()=>n(!0),"aria-label":"Abrir menú",children:e.jsx(Pe,{size:28})}),e.jsx("h1",{className:"header-title",children:e.jsx(_,{to:"/",className:"header-title-link",children:"USA App"})})]}),e.jsxs("div",{className:"header-right-actions",children:[e.jsx("button",{onClick:u,className:"theme-button icon-button","aria-label":"Cambiar tema",children:N==="light"?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),e.jsx("div",{className:"header-actions",children:s?e.jsxs(e.Fragment,{children:[e.jsxs(_,{to:"/listaclientes",className:"button-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ne,{size:18}),e.jsx("span",{children:"Clientes"})]}),e.jsxs(_,{to:"/nuevocliente",className:"button-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(re,{size:18}),e.jsx("span",{children:"Nuevo Cliente"})]}),e.jsxs("div",{className:"user-menu-container",children:[e.jsxs("button",{onClick:()=>p(!o),className:"user-menu-button",children:[e.jsx("span",{children:s.name}),e.jsx("div",{className:"avatar",children:s.nombre.charAt(0)})]}),o&&e.jsxs("div",{className:"dropdown-menu",children:[e.jsxs(_,{to:"/profile",className:"dropdown-item",onClick:()=>p(!1),children:[e.jsx(V,{size:18}),e.jsx("span",{children:"Ver Perfil"})]}),e.jsxs("button",{onClick:l,className:"dropdown-item",children:[e.jsx(ae,{size:18}),e.jsx("span",{children:"Cerrar Sesión"})]})]})]})]}):e.jsx(e.Fragment,{})}),!s&&e.jsx(_,{to:"/signin",className:"button-primary login-action","aria-label":"Iniciar Sesión",children:e.jsx(De,{size:18})})]})]})}),a&&s&&e.jsxs("div",{className:"mobile-nav",children:[e.jsxs("div",{className:"mobile-nav-header",children:[e.jsxs("div",{className:"mobile-user-info",children:[e.jsx("div",{className:"avatar",children:s.nombre.charAt(0)}),e.jsx("span",{children:s.name})]}),e.jsx("button",{className:"close-menu-btn",onClick:()=>n(!1),"aria-label":"Cerrar menú",children:e.jsx(ze,{size:32})})]}),e.jsxs("nav",{className:"mobile-nav-links",children:[e.jsxs(_,{to:"/listaclientes",className:"mobile-nav-item",onClick:()=>n(!1),children:[e.jsx(ne,{size:22}),e.jsx("span",{children:"Lista de Clientes"})]}),e.jsxs(_,{to:"/nuevocliente",className:"mobile-nav-item",onClick:()=>n(!1),children:[e.jsx(re,{size:22}),e.jsx("span",{children:"Nuevo Cliente"})]}),e.jsxs(_,{to:"/profile",className:"mobile-nav-item",onClick:()=>n(!1),children:[e.jsx(V,{size:22}),e.jsx("span",{children:"Ver Perfil"})]}),e.jsxs("button",{onClick:l,className:"mobile-nav-item",children:[e.jsx(ae,{size:22}),e.jsx("span",{children:"Cerrar Sesión"})]})]})]}),e.jsx("div",{className:"main",children:e.jsx("div",{className:"main-content",children:e.jsx(le,{})})}),e.jsx("div",{className:"footer",children:e.jsx("div",{className:"footer-container",children:e.jsxs("span",{children:["© ",new Date().getFullYear()," mr.F-dev. Todos los derechos reservados."]})})})]})})}const Q=de({reducerPath:"clienteApi",baseQuery:ue({baseUrl:"/api",prepareHeaders:(t,{getState:s})=>{var a,n;const r=(n=(a=s().userSignin)==null?void 0:a.userInfo)==null?void 0:n.token;return r&&t.set("Authorization",`Bearer ${r}`),t}}),tagTypes:["Cliente"],endpoints:t=>({getClientes:t.query({query:()=>"/clientes",providesTags:s=>s?[...s.map(({_id:r})=>({type:"Cliente",id:r})),{type:"Cliente",id:"LIST"}]:[{type:"Cliente",id:"LIST"}]}),getCliente:t.query({query:s=>`/clientes/${s}`,providesTags:(s,r,a)=>[{type:"Cliente",id:a}]}),newCliente:t.mutation({query:s=>({url:"/clientes/newcliente",method:"POST",body:s}),invalidatesTags:[{type:"Cliente",id:"LIST"}]}),updateCliente:t.mutation({query:({id:s,...r})=>({url:`/clientes/${s}`,method:"PUT",body:r}),invalidatesTags:(s,r,{id:a})=>[{type:"Cliente",id:a},{type:"Cliente",id:"LIST"}]}),deleteCliente:t.mutation({query:s=>({url:`/clientes/${s}`,method:"DELETE"}),invalidatesTags:(s,r,a)=>[{type:"Cliente",id:a},{type:"Cliente",id:"LIST"}]})})}),{useGetClientesQuery:is,useGetClienteQuery:os,useNewClienteMutation:ls,useDeleteClienteMutation:cs,useUpdateClienteMutation:ds}=Q,Ee=Me({name:"splash",initialState:{isVisible:sessionStorage.getItem("splashShown")!=="true"},reducers:{hideSplash:t=>{t.isVisible=!1,sessionStorage.setItem("splashShown","true")}}}),{hideSplash:et}=Ee.actions,us=Ee.reducer,ms=(t={},s)=>{switch(s.type){case me:return{loading:!0};case he:return{loading:!1,userInfo:s.payload};case pe:return{loading:!1,error:s.payload};default:return t}},hs=(t={},s)=>{switch(s.type){case xe:return{loading:!0};case Z:return{loading:!1,userInfo:s.payload};case je:return{loading:!1,error:s.payload};case fe:return{};case Qe:return{};default:return t}},ps=(t={loading:!0},s)=>{switch(s.type){case ge:return{loading:!0};case Se:return{loading:!1,user:s.payload};case Ce:return{loading:!1,error:s.payload};case Ve:return{loading:!0};default:return t}},xs=(t={},s)=>{switch(s.type){case ve:return{loading:!0};case ye:return{loading:!1,success:!0};case Ne:return{loading:!1,error:s.payload};case M:return{};default:return t}},js=(t={},s)=>{switch(s.type){case Je:return{loading:!0};case Ye:return{loading:!1,success:!0};case Ke:return{loading:!1,error:s.payload};case Xe:return{};default:return t}},fs=(t={loading:!0,users:[]},s)=>{switch(s.type){case He:return{loading:!0};case We:return{loading:!1,vendedores:s.payload};case Ze:return{loading:!1,error:s.payload};default:return t}},Y=de({reducerPath:"usersApi",baseQuery:ue({baseUrl:"/api",prepareHeaders:(t,{getState:s})=>{const r=s().userSignin.userInfo.token;return r&&t.set("authorization",`Bearer ${r}`),t}}),endpoints:t=>({getUsers:t.query({query:()=>"/users"}),getUser:t.query({query:s=>`/user/${s}`}),registerUser:t.mutation({query:(s,r,a)=>({url:"/users/register",method:"POST",body:{nombre:s,email:r,password:a}}),invalidatesTags:["Users"]})})}),gs={userSignin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},be=qe({reducer:{splash:us,userSignin:hs,userRegister:ms,userDetails:ps,userUpdateProfile:xs,userUpdate:js,userList:fs,[Q.reducerPath]:Q.reducer,[Y.reducerPath]:Y.reducer},middleware:t=>t().concat(Q.middleware,Y.middleware),preloadedState:gs});Ge(be.dispatch);const Ss=()=>{const t=F(r=>r.userSignin),{userInfo:s}=t;return s?e.jsx(le,{}):e.jsx(Re,{to:"/signin"})};function Cs(){const t=se(),[s,r]=i.useState(""),[a,n]=i.useState(""),[o,p]=i.useState(!1),{search:N}=ce(),h=new URLSearchParams(N).get("redirect"),l=h||"/",u=F(j=>j.userSignin),{userInfo:x,loading:S,error:E}=u,y=H(),w=j=>{j.preventDefault(),y(ss(s,a))};return i.useEffect(()=>{x&&t(l)},[t,l,x]),e.jsx("div",{className:"form-container",children:e.jsxs("form",{className:"form-card card",onSubmit:w,children:[e.jsx("h1",{className:"form-title",children:"Iniciar Sesión"}),E&&e.jsx("div",{className:"form-error",children:E}),e.jsxs("div",{className:"input-group",children:[e.jsx(te,{className:"input-icon",size:20}),e.jsx("input",{type:"email",id:"email",placeholder:"Correo electrónico",required:!0,onChange:j=>r(j.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(q,{className:"input-icon",size:20}),e.jsx("input",{type:o?"text":"password",id:"password",placeholder:"Contraseña",required:!0,onChange:j=>n(j.target.value)}),e.jsx("button",{type:"button",className:"password-toggle-button",onClick:()=>p(!o),children:o?e.jsx(G,{size:20}):e.jsx($,{size:20})})]}),e.jsx("button",{className:"button-primary form-submit-button",type:"submit",disabled:S,children:S?"Iniciando...":"Entrar"}),e.jsxs("div",{className:"form-link",children:["¿Nuevo por aquí?"," ",e.jsx(_,{to:`/register?redirect=${l}`,children:"Crea una cuenta"})]})]})})}function vs(){const t=se(),[s,r]=i.useState(""),[a,n]=i.useState(""),[o,p]=i.useState(""),[N,h]=i.useState(""),[l,u]=i.useState(!1),[x,S]=i.useState(!1),[E,y]=i.useState(null),{search:w}=ce(),j=new URLSearchParams(w).get("redirect"),R=j||"/",f=F(m=>m.userRegister),{userInfo:L,loading:D,error:U}=f,b=H(),T=m=>{m.preventDefault(),o!==N?y("Las contraseñas no coinciden"):(y(null),b(es(s,a,o)))};return i.useEffect(()=>{L&&t(R)},[t,R,L]),i.useEffect(()=>{if(U){const m=setTimeout(()=>{b({type:$e})},4e3);return()=>clearTimeout(m)}},[b,U]),e.jsx("div",{className:"form-container",children:e.jsxs("form",{className:"form-card",onSubmit:T,children:[e.jsx("h2",{className:"form-title",children:"Crear Cuenta"}),e.jsxs("div",{className:"input-group",children:[e.jsx(V,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Nombre",required:!0,value:s,onChange:m=>r(m.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(te,{className:"input-icon"}),e.jsx("input",{type:"email",placeholder:"Email",required:!0,value:a,onChange:m=>n(m.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(q,{className:"input-icon"}),e.jsx("input",{type:l?"text":"password",placeholder:"Clave",required:!0,value:o,onChange:m=>p(m.target.value)}),e.jsx("button",{type:"button",className:"password-toggle-button",onClick:()=>u(!l),children:l?e.jsx(G,{}):e.jsx($,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(q,{className:"input-icon"}),e.jsx("input",{type:x?"text":"password",placeholder:"Confirmar Clave",required:!0,value:N,onChange:m=>h(m.target.value)}),e.jsx("button",{type:"button",className:"password-toggle-button",onClick:()=>S(!x),children:x?e.jsx(G,{}):e.jsx($,{})})]}),(U||E)&&e.jsx("div",{className:"form-error",children:U||E}),e.jsx("button",{type:"submit",className:"button-primary form-submit-button",disabled:D,children:D?"Registrando...":"Crear Cuenta"}),e.jsxs("div",{className:"form-link",children:["¿Ya tienes una cuenta?"," ",e.jsx(_,{to:`/signin?redirect=${R}`,children:"Inicia Sesión"})]})]})})}function ys(){const[t,s]=i.useState(""),[r,a]=i.useState(""),[n,o]=i.useState(""),[p,N]=i.useState(""),[h,l]=i.useState(!1),[u,x]=i.useState(!1),[S,E]=i.useState(null),y=F(g=>g.userSignin),{userInfo:w}=y,j=F(g=>g.userDetails),{loading:R,error:f,user:L}=j,D=F(g=>g.userUpdateProfile),{success:U,error:b,loading:T}=D,m=H();i.useEffect(()=>{L?(s(L.nombre||" "),a(L.email||" ")):(m({type:M}),m(ns(w._id)))},[m,w._id,L]);const B=g=>{g.preventDefault(),n!==p?E("Las contraseñas no coinciden"):(E(null),m(rs({userId:L._id,nombre:t,email:r,password:n})))};return i.useEffect(()=>{U&&(I.fire({title:"Datos Actualizado con Exito!",text:"Tu perfil ha sido actualizado.",icon:"success",imageWidth:70,imageHeight:70,imageAlt:"logo"}),m({type:M}))},[m,U]),i.useEffect(()=>{b&&(I.fire({title:"Error",text:b,icon:"error",imageWidth:70,imageHeight:70,imageAlt:"logo"}),m({type:M}))},[m,b]),i.useEffect(()=>{f&&(I.fire("Ocurrio un Error al Actualizar!","",f),m({type:M}))},[m,f]),e.jsx("div",{className:"form-container",children:e.jsxs("form",{className:"form-card",onSubmit:B,children:[e.jsx("h2",{className:"form-title",children:"Perfil de Usuario"}),R?e.jsx("p",{children:"Loading..."}):e.jsxs(oe.Fragment,{children:[e.jsxs("div",{className:"input-group",children:[e.jsx(V,{className:"input-icon"}),e.jsx("input",{id:"nombre",type:"text",placeholder:"Nombre",value:t,onChange:g=>s(g.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(te,{className:"input-icon"}),e.jsx("input",{id:"email",type:"email",placeholder:"Email",value:r,onChange:g=>a(g.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(q,{className:"input-icon"}),e.jsx("input",{id:"password",type:h?"text":"password",placeholder:"Nueva clave (opcional)",onChange:g=>o(g.target.value)}),e.jsx("button",{type:"button",className:"password-toggle-button",onClick:()=>l(!h),children:h?e.jsx(G,{}):e.jsx($,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(q,{className:"input-icon"}),e.jsx("input",{id:"confirmPassword",type:u?"text":"password",placeholder:"Confirmar nueva clave",onChange:g=>N(g.target.value)}),e.jsx("button",{type:"button",className:"password-toggle-button",onClick:()=>x(!u),children:u?e.jsx(G,{}):e.jsx($,{})})]}),(b||S)&&e.jsx("div",{className:"form-error",children:b||S}),e.jsx("button",{type:"submit",className:"button-primary form-submit-button",disabled:T,children:T?"Actualizando...":"Actualizar Perfil"})]})]})})}function Ns(){return e.jsxs("div",{children:[e.jsx("div",{className:"home-background"}),e.jsx("div",{className:"home-content",children:e.jsx(Oe,{className:"home-watermark-icon"})})]})}const K={container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"calc(100vh - 200px)",textAlign:"center",backgroundColor:"#f8f9fa",borderRadius:"8px",margin:"1rem",padding:"2rem",color:"#495057"},title:{fontSize:"2.5rem",fontWeight:"bold",marginTop:"1rem"},text:{fontSize:"1.1rem",maxWidth:"500px",lineHeight:"1.6"}};function Es(){return e.jsxs("div",{style:K.container,children:[e.jsx(Fe,{size:64,color:"#ffc107"}),e.jsx("h1",{style:K.title,children:"Página en Construcción"}),e.jsxs("p",{style:K.text,children:["Estamos trabajando para tener esta sección lista lo antes posible.",e.jsx("br",{}),"Ofrecemos disculpas por las molestias."]}),e.jsx(_,{to:"/",className:"header-login-button",style:{marginTop:"2rem"},children:"Volver al Inicio"})]})}const we=({isOpen:t,onClose:s,children:r})=>t?e.jsx("div",{className:"modal-backdrop",onClick:s,children:e.jsxs("div",{className:"modal-content",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{className:"modal-close-btn",onClick:s,children:"×"}),r]})}):null,bs=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),e.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),ws=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Us=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"}),e.jsx("path",{d:"m15 5 4 4"})]}),ie={nombre:"",direccion:"",telefono:"",email:""},X={email:"",zipCode:"",ciudad:"",asesor:"",vendido:0},Is=()=>{const[t,s]=i.useState(ie),[r,a]=i.useState([]),[n,o]=i.useState(X),[p,N]=i.useState(null),[h,l]=i.useState({}),[u,x]=i.useState(!1),[S,{isLoading:E,isSuccess:y,isError:w,error:j}]=ls(),R=d=>{const{name:C,value:A}=d.target;s(P=>({...P,[C]:A}))},f=d=>{const{name:C,value:A}=d.target;if(C==="vendido"){const P=A.replace(/[^\d]/g,""),c=P?parseInt(P,10):0;o(v=>({...v,[C]:c}))}else o(P=>({...P,[C]:A}))},L=()=>{N(null),o(X),x(!0)},D=d=>{N(d),o(r[d]),x(!0)},U=()=>{x(!1),N(null),o(X)},b=()=>{if(!n.email){I.fire({icon:"error",title:"Campo Obligatorio",text:"El email de la cuenta es obligatorio.",confirmButtonColor:"var(--primary-color)"});return}p!==null?T():a(d=>[...d,{...n,creado:new Date}]),U()},T=()=>{const d=r.map((C,A)=>A===p?n:C);a(d)},m=d=>{I.fire({title:"¿Estás seguro?",text:"No podrás revertir esta acción.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, ¡eliminar!",cancelButtonText:"Cancelar"}).then(C=>{C.isConfirmed&&(a(A=>A.filter((P,c)=>c!==d)),I.fire({title:"¡Eliminada!",text:"La cuenta ha sido eliminada.",icon:"success"}))})},B=()=>{const d={};return t.nombre.trim()||(d.nombre="El nombre completo es obligatorio."),t.direccion.trim()||(d.direccion="La dirección es obligatoria."),t.email&&!/\S+@\S+\.\S+/.test(t.email)&&(d.email="El formato del email no es válido."),l(d),Object.keys(d).length===0},g=d=>{if(d.preventDefault(),!B())return;const C={...t,cuentas:r};S(C)};return i.useEffect(()=>{var d;if(y&&(I.fire({icon:"success",title:"¡Cliente Creado!",text:"El nuevo cliente ha sido guardado exitosamente.",timer:2e3,showConfirmButton:!1}),s(ie),a([]),l({})),w){const C=((d=j==null?void 0:j.data)==null?void 0:d.message)||"Ocurrió un error desconocido";I.fire({icon:"error",title:"Error al crear el cliente",text:C,confirmButtonColor:"var(--primary-color)"}),console.error("Error en la mutación:",j)}},[y,w,j]),e.jsxs("div",{className:"crear-cliente-container",children:[e.jsxs("form",{onSubmit:g,className:"cliente-form",children:[e.jsx("h1",{children:"Crear Nuevo Cliente"}),e.jsxs("section",{className:"datos-principales",children:[e.jsx("h2",{children:"Datos Principales"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-field-container",children:[e.jsx("input",{name:"nombre",value:t.nombre,onChange:R,placeholder:"Nombre completo",className:h.nombre?"input-error":""}),h.nombre&&e.jsx("span",{className:"form-field-error",children:h.nombre})]}),e.jsxs("div",{className:"form-field-container",children:[e.jsx("input",{name:"direccion",value:t.direccion,onChange:R,placeholder:"Dirección",className:h.direccion?"input-error":""}),h.direccion&&e.jsx("span",{className:"form-field-error",children:h.direccion})]}),e.jsx("div",{className:"form-field-container",children:e.jsx("input",{name:"telefono",value:t.telefono,onChange:R,placeholder:"Teléfono"})}),e.jsxs("div",{className:"form-field-container",children:[e.jsx("input",{type:"email",name:"email",value:t.email,onChange:R,placeholder:"Email Principal",className:h.email?"input-error":""}),h.email&&e.jsx("span",{className:"form-field-error",children:h.email})]})]})]}),e.jsxs("section",{className:"cuentas-seccion",children:[e.jsxs("div",{className:"cuentas-header",children:[e.jsx("h2",{children:"Cuentas"}),e.jsxs("button",{type:"button",className:"add-btn",onClick:L,children:[e.jsx(bs,{})," Agregar Cuenta"]})]}),e.jsx("div",{className:"grid-cuentas",children:r.map((d,C)=>e.jsxs("div",{className:"cuenta-card",children:[e.jsxs("div",{className:"cuenta-card-actions",children:[e.jsx("button",{type:"button",onClick:()=>D(C),className:"icon-btn-card",children:e.jsx(Us,{})}),e.jsx("button",{type:"button",onClick:()=>m(C),className:"icon-btn-card delete",children:e.jsx(ws,{})})]}),e.jsx("div",{className:"cuenta-card-header",children:e.jsx("strong",{children:d.email})}),e.jsxs("div",{className:"cuenta-card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Ciudad:"})," ",d.ciudad||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Zip:"})," ",d.zipCode||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Asesor:"})," ",d.asesor||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Vendido:"})," ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(d.vendido||0)]})]})]},C))})]}),e.jsx("button",{type:"submit",className:"submit-btn",disabled:E,children:E?"Guardando...":"Guardar Cliente"})]}),e.jsx(we,{isOpen:u,onClose:U,children:e.jsxs("div",{className:"modal-form",children:[e.jsx("h3",{children:p!==null?"Editar Cuenta":"Nueva Cuenta"}),e.jsxs("div",{className:"form-grid",children:[e.jsx("input",{name:"email",value:n.email,onChange:f,placeholder:"Email de la cuenta",required:!0}),e.jsx("input",{name:"zipCode",value:n.zipCode,onChange:f,placeholder:"Zip Code"}),e.jsx("input",{name:"ciudad",value:n.ciudad,onChange:f,placeholder:"Ciudad"}),e.jsx("input",{name:"asesor",value:n.asesor,onChange:f,placeholder:"Asesor"}),e.jsx("input",{type:"text",name:"vendido",value:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n.vendido||0),onChange:f,placeholder:"Vendido ($)"})]}),e.jsxs("div",{className:"modal-form-actions",children:[e.jsx("button",{type:"button",onClick:b,className:"button-primary",children:p!==null?"Actualizar Cuenta":"Confirmar y Agregar"}),e.jsx("button",{type:"button",onClick:U,className:"button-secondary",children:"Cancelar"})]})]})})]})},Rs=()=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),_s=()=>e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),Ls=()=>{const{data:t,error:s,isLoading:r,isFetching:a}=is(),[n]=cs(),[o,p]=i.useState(""),N=(l,u)=>{I.fire({title:`¿Eliminar a ${u}?`,text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(x=>{x.isConfirmed&&n(l).unwrap().then(()=>{}).catch(S=>{I.fire("Error","No se pudo eliminar el cliente.","error"),console.error(S)})})};if(r||a)return e.jsx("div",{className:"loading-container",children:"Cargando clientes..."});if(s)return e.jsx("div",{className:"error-container",children:"Error al cargar los clientes. Por favor, intente de nuevo."});const h=(t==null?void 0:t.filter(l=>l.nombre.toLowerCase().includes(o.toLowerCase())||l.email&&l.email.toLowerCase().includes(o.toLowerCase())))||[];return e.jsxs("div",{className:"lista-clientes-container",children:[e.jsx("h1",{children:"Lista de Clientes"}),e.jsxs("div",{className:"lista-header",children:[e.jsx("div",{className:"search-container",children:e.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",className:"search-input",value:o,onChange:l=>p(l.target.value)})}),e.jsxs("div",{className:"tooltip-container",children:[e.jsx(_,{to:"/nuevocliente",className:"button-primary icon-button circle",children:e.jsx(Be,{})}),e.jsx("span",{className:"tooltip-text",children:"Crear nuevo cliente"})]})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"clientes-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Teléfono"}),e.jsx("th",{children:"Cuentas"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:h.length>0?h.map(l=>e.jsxs("tr",{children:[e.jsx("td",{"data-label":"Nombre",children:l.nombre}),e.jsx("td",{"data-label":"Email",children:l.email||"-"}),e.jsx("td",{"data-label":"Teléfono",children:l.telefono||"-"}),e.jsx("td",{"data-label":"Cuentas",className:"cuentas-cell",children:l.cuentas.length>0?l.cuentas.map((u,x)=>e.jsxs("div",{className:"cuenta-pill-container",children:[e.jsx("span",{className:"cuenta-pill",children:u.email}),e.jsxs("div",{className:"cuenta-tooltip",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Ciudad:"})," ",u.ciudad||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Zip:"})," ",u.zipCode||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Asesor:"})," ",u.asesor||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Vendido:"})," ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(u.vendido||0)]})]})]},x)):e.jsx("span",{children:"-"})}),e.jsx("td",{"data-label":"Acciones",children:e.jsxs("div",{className:"action-buttons",children:[e.jsx(_,{to:`/clientes/editar/${l._id}`,className:"action-btn edit-btn",children:e.jsx(Rs,{})}),e.jsx("button",{onClick:()=>N(l._id,l.nombre),className:"action-btn delete-btn",children:e.jsx(_s,{})})]})})]},l._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"no-data-cell",children:o?"No se encontraron clientes.":"No hay clientes registrados."})})})]})})]})},Ts=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),e.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),As=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),ks=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"}),e.jsx("path",{d:"m15 5 4 4"})]}),Ps={nombre:"",direccion:"",telefono:"",email:""},ee={email:"",zipCode:"",ciudad:"",asesor:"",vendido:0},Ds=()=>{const{id:t}=_e(),s=se(),{data:r,error:a,isLoading:n}=os(t),[o,{isLoading:p,isSuccess:N,isError:h,error:l}]=ds(),[u,x]=i.useState(Ps),[S,E]=i.useState([]),[y,w]=i.useState(ee),[j,R]=i.useState(null),[f,L]=i.useState({}),[D,U]=i.useState(!1);i.useEffect(()=>{r&&(x({nombre:r.nombre||"",direccion:r.direccion||"",telefono:r.telefono||"",email:r.email||""}),E(r.cuentas||[]))},[r]);const b=c=>{const{name:v,value:z}=c.target;x(O=>({...O,[v]:z}))},T=c=>{const{name:v,value:z}=c.target;if(v==="vendido"){const O=z.replace(/[^\d]/g,""),J=O?parseInt(O,10):0;w(Ue=>({...Ue,[v]:J}))}else w(O=>({...O,[v]:z}))},m=()=>{R(null),w(ee),U(!0)},B=c=>{R(c),w(S[c]),U(!0)},g=()=>{U(!1),R(null),w(ee)},d=()=>{if(!y.email){I.fire({icon:"error",title:"Campo Obligatorio",text:"El email de la cuenta es obligatorio.",confirmButtonColor:"var(--primary-color)"});return}if(j!==null){const c=S.map((v,z)=>z===j?y:v);E(c)}else E(c=>[...c,{...y,creado:new Date}]);g()},C=c=>{I.fire({title:"¿Estás seguro?",text:"No podrás revertir esta acción.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, ¡eliminar!",cancelButtonText:"Cancelar"}).then(v=>{v.isConfirmed&&(E(z=>z.filter((O,J)=>J!==c)),I.fire("¡Eliminada!","La cuenta ha sido eliminada.","success"))})},A=()=>{const c={};return u.nombre.trim()||(c.nombre="El nombre completo es obligatorio."),u.direccion.trim()||(c.direccion="La dirección es obligatoria."),u.email&&!/\S+@\S+\.\S+/.test(u.email)&&(c.email="El formato del email no es válido."),L(c),Object.keys(c).length===0},P=c=>{if(c.preventDefault(),!A())return;const v={id:t,...u,cuentas:S};o(v)};return i.useEffect(()=>{var c;if(N&&(I.fire({icon:"success",title:"¡Cliente Actualizado!",text:"Los datos del cliente han sido guardados exitosamente.",timer:2e3,showConfirmButton:!1}),s("/listaclientes")),h){const v=((c=l==null?void 0:l.data)==null?void 0:c.message)||"Ocurrió un error desconocido";I.fire({icon:"error",title:"Error al actualizar el cliente",text:v,confirmButtonColor:"var(--primary-color)"}),console.error("Error en la mutación:",l)}},[N,h,l,s]),n?e.jsx("div",{className:"loading-container",children:"Cargando datos del cliente..."}):a?e.jsx("div",{className:"error-container",children:"Error al cargar el cliente. Verifique que el ID es correcto."}):e.jsxs("div",{className:"crear-cliente-container",children:[e.jsxs("form",{onSubmit:P,className:"cliente-form",children:[e.jsx("h1",{children:"Editar Cliente"}),e.jsxs("section",{className:"datos-principales",children:[e.jsx("h2",{children:"Datos Principales"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-field-container",children:[e.jsx("input",{name:"nombre",value:u.nombre,onChange:b,placeholder:"Nombre completo",className:f.nombre?"input-error":""}),f.nombre&&e.jsx("span",{className:"form-field-error",children:f.nombre})]}),e.jsxs("div",{className:"form-field-container",children:[e.jsx("input",{name:"direccion",value:u.direccion,onChange:b,placeholder:"Dirección",className:f.direccion?"input-error":""}),f.direccion&&e.jsx("span",{className:"form-field-error",children:f.direccion})]}),e.jsx("div",{className:"form-field-container",children:e.jsx("input",{name:"telefono",value:u.telefono,onChange:b,placeholder:"Teléfono"})}),e.jsxs("div",{className:"form-field-container",children:[e.jsx("input",{type:"email",name:"email",value:u.email,onChange:b,placeholder:"Email Principal",className:f.email?"input-error":""}),f.email&&e.jsx("span",{className:"form-field-error",children:f.email})]})]})]}),e.jsxs("section",{className:"cuentas-seccion",children:[e.jsxs("div",{className:"cuentas-header",children:[e.jsx("h2",{children:"Cuentas"}),e.jsxs("button",{type:"button",className:"add-btn",onClick:m,children:[e.jsx(Ts,{})," Agregar Cuenta"]})]}),e.jsx("div",{className:"grid-cuentas",children:S.map((c,v)=>e.jsxs("div",{className:"cuenta-card",children:[e.jsxs("div",{className:"cuenta-card-actions",children:[e.jsx("button",{type:"button",onClick:()=>B(v),className:"icon-btn-card",children:e.jsx(ks,{})}),e.jsx("button",{type:"button",onClick:()=>C(v),className:"icon-btn-card delete",children:e.jsx(As,{})})]}),e.jsx("div",{className:"cuenta-card-header",children:e.jsx("strong",{children:c.email})}),e.jsxs("div",{className:"cuenta-card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Ciudad:"})," ",c.ciudad||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Zip:"})," ",c.zipCode||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Asesor:"})," ",c.asesor||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Vendido:"})," ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(c.vendido||0)]})]})]},v))})]}),e.jsx("button",{type:"submit",className:"submit-btn",disabled:p,children:p?"Actualizando...":"Actualizar Cliente"})]}),e.jsx(we,{isOpen:D,onClose:g,children:e.jsxs("div",{className:"modal-form",children:[e.jsx("h3",{children:j!==null?"Editar Cuenta":"Nueva Cuenta"}),e.jsxs("div",{className:"form-grid",children:[e.jsx("input",{name:"email",value:y.email,onChange:T,placeholder:"Email de la cuenta",required:!0}),e.jsx("input",{name:"zipCode",value:y.zipCode,onChange:T,placeholder:"Zip Code"}),e.jsx("input",{name:"ciudad",value:y.ciudad,onChange:T,placeholder:"Ciudad"}),e.jsx("input",{name:"asesor",value:y.asesor,onChange:T,placeholder:"Asesor"}),e.jsx("input",{type:"text",name:"vendido",value:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(y.vendido||0),onChange:T,placeholder:"Vendido ($)"})]}),e.jsxs("div",{className:"modal-form-actions",children:[e.jsx("button",{type:"button",onClick:d,className:"button-primary",children:j!==null?"Actualizar Cuenta":"Confirmar y Agregar"}),e.jsx("button",{type:"button",onClick:g,className:"button-secondary",children:"Cancelar"})]})]})})]})},zs=Le(Te(e.jsxs(k,{path:"/",element:e.jsx(as,{}),children:[e.jsx(k,{index:!0,element:e.jsx(Ns,{})}),e.jsx(k,{path:"/signin",element:e.jsx(Cs,{})}),e.jsx(k,{path:"/register",element:e.jsx(vs,{})}),e.jsx(k,{path:"",element:e.jsx(Ss,{}),children:e.jsx(k,{path:"/profile",element:e.jsx(ys,{})})}),e.jsx(k,{path:"/enconstruccion",element:e.jsx(Es,{})}),e.jsx(k,{path:"/nuevocliente",element:e.jsx(Is,{})}),e.jsx(k,{path:"/listaclientes",element:e.jsx(Ls,{})}),e.jsx(k,{path:"/clientes/editar/:id",element:e.jsx(Ds,{})})]})));Ie.createRoot(document.getElementById("root")).render(e.jsx(ke,{store:be,children:e.jsx(oe.StrictMode,{children:e.jsx(Ae,{router:zs})})}));
