import{r as i,j as e,R as Se}from"./react-B1f6vjZc.js";import{R as Ee}from"./react-dom-D5V5GYEt.js";import{L as w,O as ee,N as ye,u as se,a as te,c as Ce,b as Ne,R as ve,d as A}from"./react-router-BcdwFqV6.js";import{a as P,c as V,P as be}from"./react-redux-DJbOStK5.js";import{a as H}from"./axios-ngrFHoWO.js";import{L as Re,U as Ue,a as q,b as we,c as Ie,M as $,d as M,E as z,e as B,F as Ae,P as Te,S as _e,H as Le}from"./lucide-react-CDBhPiBd.js";import{c as re,f as ne,a as Pe,b as ke,s as De}from"./@reduxjs-ZAJMJ1g6.js";import{S as I}from"./sweetalert2-Bj_ZQUAw.js";import"./cookie-CqkleIqs.js";import"./scheduler-Bb8JjhAW.js";import"./use-sync-external-store-CAtsQR_f.js";import"./redux-BXkGT1VS.js";import"./immer-DqhfNuDB.js";import"./redux-thunk-ClJT1hhx.js";import"./@standard-schema-DjkmAgHD.js";import"./reselect-utOO-l3Z.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const g of o.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&n(g)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();const ae="USER_REGISTER_REQUEST",oe="USER_REGISTER_SUCCESS",ie="USER_REGISTER_FAIL",Oe="USER_REGISTER_RESET",le="USER_SIGNIN_REQUEST",Q="USER_SIGNIN_SUCCESS",ce="USER_SIGNIN_FAIL",Fe="USER_SIGNIN_RESET",de="USER_SIGNOUT",ue="USER_DETAILS_REQUEST",me="USER_DETAILS_SUCCESS",pe="USER_DETAILS_FAIL",Me="USER_DETAILS_RESET",ze="USER_LIST_REQUEST",Be="USER_LIST_SUCCESS",Ge="USER_LIST_FAIL",he="USER_UPDATE_PROFILE_REQUEST",xe="USER_UPDATE_PROFILE_SUCCESS",ge="USER_UPDATE_PROFILE_FAIL",F="USER_UPDATE_PROFILE_RESET",qe="USER_UPDATE_REQUEST",Ve="USER_UPDATE_SUCCESS",He="USER_UPDATE_FAIL",Qe="USER_UPDATE_RESET",Ye=(t,s,a)=>async n=>{n({type:ae,payload:{nombre:t,email:s,password:a}});try{const{data:r}=await H.post("/api/users/register",{nombre:t,email:s,password:a});n({type:oe,payload:r}),n({type:Q,payload:r}),localStorage.setItem("userInfo",JSON.stringify(r))}catch(r){n({type:ie,payload:r.response&&r.response.data.message?r.response.data.message:r.message})}},We=(t,s)=>async a=>{a({type:le,payload:{email:t,password:s}});try{const{data:n}=await H.post("/api/users/signin",{email:t,password:s});a({type:Q,payload:n}),localStorage.setItem("userInfo",JSON.stringify(n))}catch(n){a({type:ce,payload:n.response&&n.response.data.message?n.response.data.message:n.message})}},Xe=()=>t=>{localStorage.removeItem("userInfo"),localStorage.removeItem("cartItems"),localStorage.removeItem("shippingAddress"),t({type:de}),document.location.href="/signin"},Ke=t=>async(s,a)=>{s({type:ue,payload:t});const{userSignin:{userInfo:n}}=a();try{const{data:r}=await H.get(`/api/users/${t}`,{headers:{Authorization:`Bearer ${n.token}`}});s({type:me,payload:r})}catch(r){const o=r.response&&r.response.data.message?r.response.data.message:r.message;s({type:pe,payload:o})}},Je=t=>async(s,a)=>{s({type:he,payload:t});const{userSignin:{userInfo:n}}=a();try{const{data:r}=await H.put("/api/users/profile",t,{headers:{Authorization:`Bearer ${n.token}`}});s({type:xe,payload:r}),s({type:Q,payload:r}),localStorage.setItem("userInfo",JSON.stringify(r))}catch(r){const o=r.response&&r.response.data.message?r.response.data.message:r.message;s({type:ge,payload:o})}};function $e(){const t=P(l=>l.userSignin),{userInfo:s}=t,a=V(),[n,r]=i.useState(!1),[o,g]=i.useState(()=>document.body.getAttribute("data-theme")||"light"),S=()=>{r(!1),a(Xe())},u=()=>{g(l=>{const h=l==="light"?"dark":"light";return h==="dark"?document.body.setAttribute("data-theme","dark"):document.body.removeAttribute("data-theme"),h})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"display-grid",children:[e.jsx("div",{className:"header",children:e.jsxs("div",{className:"header-container",children:[e.jsx("h1",{className:"header-title",children:e.jsx(w,{to:"/",className:"header-title-link",children:"USA App"})}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{onClick:u,className:"theme-button icon-button","aria-label":"Cambiar tema",children:o==="light"?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),s?e.jsxs(e.Fragment,{children:[e.jsxs(w,{to:"/listaclientes",className:"button-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Re,{size:18}),e.jsx("span",{children:"Clientes"})]}),e.jsxs(w,{to:"/nuevocliente",className:"button-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(Ue,{size:18}),e.jsx("span",{children:"Nuevo Cliente"})]}),e.jsxs("div",{className:"user-menu-container",children:[e.jsxs("button",{onClick:()=>r(!n),className:"user-menu-button",children:[e.jsx("span",{children:s.name}),e.jsx("div",{className:"avatar",children:s.nombre.charAt(0)})]}),n&&e.jsxs("div",{className:"dropdown-menu",children:[e.jsxs(w,{to:"/profile",className:"dropdown-item",onClick:()=>r(!1),children:[e.jsx(q,{size:18}),e.jsx("span",{children:"Ver Perfil"})]}),e.jsxs("button",{onClick:S,className:"dropdown-item",children:[e.jsx(we,{size:18}),e.jsx("span",{children:"Cerrar Sesión"})]})]})]})]}):e.jsx(w,{to:"/signin",className:"theme-button icon-button","aria-label":"Iniciar Sesión",children:e.jsx(Ie,{size:22})})]})]})}),e.jsx("div",{className:"main",children:e.jsx("div",{className:"main-content",children:e.jsx(ee,{})})}),e.jsx("div",{className:"footer",children:e.jsx("div",{className:"footer-container",children:e.jsxs("span",{children:["© ",new Date().getFullYear()," mr.F-dev. Todos los derechos reservados."]})})})]})})}const G=re({reducerPath:"clienteApi",baseQuery:ne({baseUrl:"/api",prepareHeaders:(t,{getState:s})=>{var n,r;const a=(r=(n=s().userSignin)==null?void 0:n.userInfo)==null?void 0:r.token;return a&&t.set("Authorization",`Bearer ${a}`),t}}),tagTypes:["Cliente"],endpoints:t=>({getClientes:t.query({query:()=>"/clientes",providesTags:s=>s?[...s.map(({_id:a})=>({type:"Cliente",id:a})),{type:"Cliente",id:"LIST"}]:[{type:"Cliente",id:"LIST"}]}),getCliente:t.query({query:s=>`/clientes/${s}`,providesTags:(s,a,n)=>[{type:"Cliente",id:n}]}),newCliente:t.mutation({query:s=>({url:"/clientes/newcliente",method:"POST",body:s}),invalidatesTags:[{type:"Cliente",id:"LIST"}]}),updateCliente:t.mutation({query:({id:s,...a})=>({url:`/clientes/${s}`,method:"PUT",body:a}),invalidatesTags:(s,a,{id:n})=>[{type:"Cliente",id:n},{type:"Cliente",id:"LIST"}]}),deleteCliente:t.mutation({query:s=>({url:`/clientes/${s}`,method:"DELETE"}),invalidatesTags:(s,a,n)=>[{type:"Cliente",id:n},{type:"Cliente",id:"LIST"}]})})}),{useGetClientesQuery:Ze,useNewClienteMutation:es,useDeleteClienteMutation:ss}=G,je=Pe({name:"splash",initialState:{isVisible:sessionStorage.getItem("splashShown")!=="true"},reducers:{hideSplash:t=>{t.isVisible=!1,sessionStorage.setItem("splashShown","true")}}}),{hideSplash:Bs}=je.actions,ts=je.reducer,rs=(t={},s)=>{switch(s.type){case ae:return{loading:!0};case oe:return{loading:!1,userInfo:s.payload};case ie:return{loading:!1,error:s.payload};default:return t}},ns=(t={},s)=>{switch(s.type){case le:return{loading:!0};case Q:return{loading:!1,userInfo:s.payload};case ce:return{loading:!1,error:s.payload};case de:return{};case Fe:return{};default:return t}},as=(t={loading:!0},s)=>{switch(s.type){case ue:return{loading:!0};case me:return{loading:!1,user:s.payload};case pe:return{loading:!1,error:s.payload};case Me:return{loading:!0};default:return t}},os=(t={},s)=>{switch(s.type){case he:return{loading:!0};case xe:return{loading:!1,success:!0};case ge:return{loading:!1,error:s.payload};case F:return{};default:return t}},is=(t={},s)=>{switch(s.type){case qe:return{loading:!0};case Ve:return{loading:!1,success:!0};case He:return{loading:!1,error:s.payload};case Qe:return{};default:return t}},ls=(t={loading:!0,users:[]},s)=>{switch(s.type){case ze:return{loading:!0};case Be:return{loading:!1,vendedores:s.payload};case Ge:return{loading:!1,error:s.payload};default:return t}},W=re({reducerPath:"usersApi",baseQuery:ne({baseUrl:"/api",prepareHeaders:(t,{getState:s})=>{const a=s().userSignin.userInfo.token;return a&&t.set("authorization",`Bearer ${a}`),t}}),endpoints:t=>({getUsers:t.query({query:()=>"/users"}),getUser:t.query({query:s=>`/user/${s}`}),registerUser:t.mutation({query:(s,a,n)=>({url:"/users/register",method:"POST",body:{nombre:s,email:a,password:n}}),invalidatesTags:["Users"]})})}),cs={userSignin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},fe=ke({reducer:{splash:ts,userSignin:ns,userRegister:rs,userDetails:as,userUpdateProfile:os,userUpdate:is,userList:ls,[G.reducerPath]:G.reducer,[W.reducerPath]:W.reducer},middleware:t=>t().concat(G.middleware,W.middleware),preloadedState:cs});De(fe.dispatch);const ds=()=>{const t=P(a=>a.userSignin),{userInfo:s}=t;return s?e.jsx(ee,{}):e.jsx(ye,{to:"/signin"})};function us(){const t=se(),[s,a]=i.useState(""),[n,r]=i.useState(""),[o,g]=i.useState(!1),{search:S}=te(),u=new URLSearchParams(S).get("redirect"),l=u||"/",h=P(p=>p.userSignin),{userInfo:f,loading:y,error:C}=h,N=V(),T=p=>{p.preventDefault(),N(We(s,n))};return i.useEffect(()=>{f&&t(l)},[t,l,f]),e.jsx("div",{className:"form-container",children:e.jsxs("form",{className:"form-card card",onSubmit:T,children:[e.jsx("h1",{className:"form-title",children:"Iniciar Sesión"}),C&&e.jsx("div",{className:"form-error",children:C}),e.jsxs("div",{className:"input-group",children:[e.jsx($,{className:"input-icon",size:20}),e.jsx("input",{type:"email",id:"email",placeholder:"Correo electrónico",required:!0,onChange:p=>a(p.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(M,{className:"input-icon",size:20}),e.jsx("input",{type:o?"text":"password",id:"password",placeholder:"Contraseña",required:!0,onChange:p=>r(p.target.value)}),e.jsx("button",{type:"button",className:"password-toggle-button",onClick:()=>g(!o),children:o?e.jsx(z,{size:20}):e.jsx(B,{size:20})})]}),e.jsx("button",{className:"button-primary form-submit-button",type:"submit",disabled:y,children:y?"Iniciando...":"Entrar"}),e.jsxs("div",{className:"form-link",children:["¿Nuevo por aquí?"," ",e.jsx(w,{to:`/register?redirect=${l}`,children:"Crea una cuenta"})]})]})})}function ms(){const t=se(),[s,a]=i.useState(""),[n,r]=i.useState(""),[o,g]=i.useState(""),[S,u]=i.useState(""),[l,h]=i.useState(!1),[f,y]=i.useState(!1),[C,N]=i.useState(null),{search:T}=te(),p=new URLSearchParams(T).get("redirect"),b=p||"/",R=P(x=>x.userRegister),{userInfo:_,loading:k,error:v}=R,L=V(),D=x=>{x.preventDefault(),o!==S?N("Las contraseñas no coinciden"):(N(null),L(Ye(s,n,o)))};return i.useEffect(()=>{_&&t(b)},[t,b,_]),i.useEffect(()=>{if(v){const x=setTimeout(()=>{L({type:Oe})},4e3);return()=>clearTimeout(x)}},[L,v]),e.jsx("div",{className:"form-container",children:e.jsxs("form",{className:"form-card",onSubmit:D,children:[e.jsx("h2",{className:"form-title",children:"Crear Cuenta"}),e.jsxs("div",{className:"input-group",children:[e.jsx(q,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Nombre",required:!0,value:s,onChange:x=>a(x.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx($,{className:"input-icon"}),e.jsx("input",{type:"email",placeholder:"Email",required:!0,value:n,onChange:x=>r(x.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(M,{className:"input-icon"}),e.jsx("input",{type:l?"text":"password",placeholder:"Clave",required:!0,value:o,onChange:x=>g(x.target.value)}),e.jsx("button",{type:"button",className:"password-toggle-button",onClick:()=>h(!l),children:l?e.jsx(z,{}):e.jsx(B,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(M,{className:"input-icon"}),e.jsx("input",{type:f?"text":"password",placeholder:"Confirmar Clave",required:!0,value:S,onChange:x=>u(x.target.value)}),e.jsx("button",{type:"button",className:"password-toggle-button",onClick:()=>y(!f),children:f?e.jsx(z,{}):e.jsx(B,{})})]}),(v||C)&&e.jsx("div",{className:"form-error",children:v||C}),e.jsx("button",{type:"submit",className:"button-primary form-submit-button",disabled:k,children:k?"Registrando...":"Crear Cuenta"}),e.jsxs("div",{className:"form-link",children:["¿Ya tienes una cuenta?"," ",e.jsx(w,{to:`/signin?redirect=${b}`,children:"Inicia Sesión"})]})]})})}const X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAANlBMVEVFRUVAQEA6Ojo1NTUxMTGFhYaVlZehoqOysrMkJCTh4eLr6+vU1NXExMVsbG1cXF0VFRVQUFASrDoiAAACRUlEQVR42rXT247rIAwFUNsY2+Hm+P9/9gBJm4w0mrezFRUVFhuqKpD+CN9J84HX9B8+MXy3XsPjn4U9CbsKAgLnAEi0F4kuiBFX1QW9t9YMeKiKSh5Os2RR0FI6Mm1IxN5KrUWYwof0UpoO2qW51donSfSCrY3jPM+Dcq+l50jErnOhE29IROlqbAYp8cRgrWv2hNluOLMgjwVr6znRTDpYuqoEivY6YbohfqGNRCtTqkhGD3lDSqO3qla7SRDhkiAiOu+sG+LdSAtmL8004/qOxEMnDf4NnrmZ6VgOMYWo6Ehayxcipg0Psv0Tlps466S0GvGCiHcjs3ebcjOiBRUWhL31BZHzhJYJkRzGgvErhESiYt2JXGNBc63lgXBDRA5VawakfUN9w5kbwpRjwiK59XgfDRviCxKJ9VKmPbLOoJbn6HcjsFtvs4VZphO+IGz4NM4g59ZKHWeYqY1jQ1wL68Eb7na0VvXg3E0V+QNx4Rsm2PdgL42OsG6zkC643bvxPnyB1rsy4wfCj8aPPDmX1gwO/MA7T+MOk9RaepwEX4hfWPJx/6EwrNZqcCaA5+gHWh4e4SNrm3XjmH3wa+M6zVTVTLMf54GwYa0LfuNXIgAT75f7uzCCH0fnKwcTLYcEgGtXgifhQBQwH4zdAwg+AgEj6GEYpuoknky8O2fVTGsuEFV/QKUsyYOmMEcjMAhlyeyr4Q1dMwFCFhEn86EYCjp2+euOkSXDypjx5Dp1iGTE7DEQniDSNc7sTwIkpHviP+UfbJwh+oK7LY4AAAAASUVORK5CYII=";function ps(){const[t,s]=i.useState(""),[a,n]=i.useState(""),[r,o]=i.useState(""),[g,S]=i.useState(""),[u,l]=i.useState(""),[h,f]=i.useState(""),[y,C]=i.useState(""),[N,T]=i.useState(!1),[p,b]=i.useState(!1),[R,_]=i.useState(null),k=P(d=>d.userSignin),{userInfo:v}=k,L=P(d=>d.userDetails),{loading:D,error:x,user:U}=L,Y=P(d=>d.userUpdateProfile),{success:c,error:m,loading:E}=Y,j=V();i.useEffect(()=>{U?(s(U.nombre||" "),n(U.email||" "),l(U.apellido||" "),f(U.cedula||" "),C(U.telefono||" ")):(j({type:F}),j(Ke(v._id)))},[j,v._id,U,c]);const O=d=>{d.preventDefault(),r!==g?_("Las contraseñas no coinciden"):(_(null),j(Je({userId:U._id,nombre:t,email:a,password:r,apellido:u,cedula:h,telefono:y})))};return i.useEffect(()=>{c&&(I.fire({title:"Datos Actualizado con Exito!",text:"Editar Perfil",imageUrl:X,imageWidth:70,imageHeight:70,imageAlt:"logo"}),j({type:F}))},[j,c]),i.useEffect(()=>{m&&(I.fire({title:"error",text:"Editar Perfil",imageUrl:X,imageWidth:70,imageHeight:70,imageAlt:"logo"}),j({type:F}))},[j,m]),i.useEffect(()=>{x&&(I.fire("Ocurrio un Error al Actualizar!","",x),j({type:F}))},[j,x]),e.jsx("div",{className:"signin-container",children:e.jsxs("form",{className:"signin-form",onSubmit:O,style:{gap:"1rem"},children:[e.jsx("img",{src:X,alt:"Logo",className:"signin-logo"}),e.jsx("h2",{children:"Perfil de Usuario"}),D?e.jsx("p",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-group",children:[e.jsx(q,{className:"input-icon"}),e.jsx("input",{id:"nombre",type:"text",placeholder:"Nombre",value:t,onChange:d=>s(d.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(q,{className:"input-icon"}),e.jsx("input",{id:"apellido",type:"text",placeholder:"Apellido",value:u,onChange:d=>l(d.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx($,{className:"input-icon"}),e.jsx("input",{id:"email",type:"email",placeholder:"Email",value:a,onChange:d=>n(d.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(M,{className:"input-icon"}),e.jsx("input",{id:"password",type:N?"text":"password",placeholder:"Nueva clave (opcional)",onChange:d=>o(d.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>T(!N),children:N?e.jsx(z,{}):e.jsx(B,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(M,{className:"input-icon"}),e.jsx("input",{id:"confirmPassword",type:p?"text":"password",placeholder:"Confirmar nueva clave",onChange:d=>S(d.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>b(!p),children:p?e.jsx(z,{}):e.jsx(B,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Ae,{className:"input-icon"}),e.jsx("input",{id:"cedula",type:"text",placeholder:"Cédula",value:h,onChange:d=>f(d.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Te,{className:"input-icon"}),e.jsx("input",{id:"telefono",type:"text",placeholder:"Teléfono",value:y,onChange:d=>C(d.target.value)})]}),(m||R)&&e.jsx("p",{className:"signin-error",children:m||R}),e.jsx("div",{className:"form-actions",children:e.jsxs("button",{type:"submit",className:"signin-button",disabled:E,children:[E?e.jsx("div",{className:"spinner"}):e.jsx(_e,{}),e.jsx("span",{children:E?"Actualizando...":"Actualizar Perfil"})]})})]})]})})}function hs(){return e.jsx("div",{children:e.jsx("h1",{children:"HOME SECTION"})})}const K={container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"calc(100vh - 200px)",textAlign:"center",backgroundColor:"#f8f9fa",borderRadius:"8px",margin:"1rem",padding:"2rem",color:"#495057"},title:{fontSize:"2.5rem",fontWeight:"bold",marginTop:"1rem"},text:{fontSize:"1.1rem",maxWidth:"500px",lineHeight:"1.6"}};function xs(){return e.jsxs("div",{style:K.container,children:[e.jsx(Le,{size:64,color:"#ffc107"}),e.jsx("h1",{style:K.title,children:"Página en Construcción"}),e.jsxs("p",{style:K.text,children:["Estamos trabajando para tener esta sección lista lo antes posible.",e.jsx("br",{}),"Ofrecemos disculpas por las molestias."]}),e.jsx(w,{to:"/",className:"header-login-button",style:{marginTop:"2rem"},children:"Volver al Inicio"})]})}const gs=({isOpen:t,onClose:s,children:a})=>t?e.jsx("div",{className:"modal-backdrop",onClick:s,children:e.jsxs("div",{className:"modal-content",onClick:n=>n.stopPropagation(),children:[e.jsx("button",{className:"modal-close-btn",onClick:s,children:"×"}),a]})}):null,js=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),e.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),fs=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),e.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Ss=()=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"}),e.jsx("path",{d:"m15 5 4 4"})]}),Z={nombre:"",direccion:"",telefono:"",email:""},J={email:"",zipCode:"",ciudad:"",asesor:"",vendido:0},Es=()=>{const[t,s]=i.useState(Z),[a,n]=i.useState([]),[r,o]=i.useState(J),[g,S]=i.useState(null),[u,l]=i.useState({}),[h,f]=i.useState(!1),[y,{isLoading:C,isSuccess:N,isError:T,error:p}]=es(),b=c=>{const{name:m,value:E}=c.target;s(j=>({...j,[m]:E}))},R=c=>{const{name:m,value:E}=c.target;if(m==="vendido"){const j=E.replace(/[^\d]/g,""),O=j?parseInt(j,10):0;o(d=>({...d,[m]:O}))}else o(j=>({...j,[m]:E}))},_=()=>{S(null),o(J),f(!0)},k=c=>{S(c),o(a[c]),f(!0)},v=()=>{f(!1),S(null),o(J)},L=()=>{if(!r.email){I.fire({icon:"error",title:"Campo Obligatorio",text:"El email de la cuenta es obligatorio.",confirmButtonColor:"var(--primary-color)"});return}g!==null?D():n(c=>[...c,{...r,creado:new Date}]),v()},D=()=>{const c=a.map((m,E)=>E===g?r:m);n(c)},x=c=>{I.fire({title:"¿Estás seguro?",text:"No podrás revertir esta acción.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, ¡eliminar!",cancelButtonText:"Cancelar"}).then(m=>{m.isConfirmed&&(n(E=>E.filter((j,O)=>O!==c)),I.fire({title:"¡Eliminada!",text:"La cuenta ha sido eliminada.",icon:"success"}))})},U=()=>{const c={};return t.nombre.trim()||(c.nombre="El nombre completo es obligatorio."),t.direccion.trim()||(c.direccion="La dirección es obligatoria."),t.email&&!/\S+@\S+\.\S+/.test(t.email)&&(c.email="El formato del email no es válido."),l(c),Object.keys(c).length===0},Y=c=>{if(c.preventDefault(),!U())return;const m={...t,cuentas:a};y(m)};return i.useEffect(()=>{var c;if(N&&(I.fire({icon:"success",title:"¡Cliente Creado!",text:"El nuevo cliente ha sido guardado exitosamente.",timer:2e3,showConfirmButton:!1}),s(Z),n([]),l({})),T){const m=((c=p==null?void 0:p.data)==null?void 0:c.message)||"Ocurrió un error desconocido";I.fire({icon:"error",title:"Error al crear el cliente",text:m,confirmButtonColor:"var(--primary-color)"}),console.error("Error en la mutación:",p)}},[N,T,p]),e.jsxs("div",{className:"crear-cliente-container",children:[e.jsxs("form",{onSubmit:Y,className:"cliente-form",children:[e.jsx("h1",{children:"Crear Nuevo Cliente"}),e.jsxs("section",{className:"datos-principales",children:[e.jsx("h2",{children:"Datos Principales"}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-field-container",children:[e.jsx("input",{name:"nombre",value:t.nombre,onChange:b,placeholder:"Nombre completo",className:u.nombre?"input-error":""}),u.nombre&&e.jsx("span",{className:"form-field-error",children:u.nombre})]}),e.jsxs("div",{className:"form-field-container",children:[e.jsx("input",{name:"direccion",value:t.direccion,onChange:b,placeholder:"Dirección",className:u.direccion?"input-error":""}),u.direccion&&e.jsx("span",{className:"form-field-error",children:u.direccion})]}),e.jsx("div",{className:"form-field-container",children:e.jsx("input",{name:"telefono",value:t.telefono,onChange:b,placeholder:"Teléfono"})}),e.jsxs("div",{className:"form-field-container",children:[e.jsx("input",{type:"email",name:"email",value:t.email,onChange:b,placeholder:"Email Principal",className:u.email?"input-error":""}),u.email&&e.jsx("span",{className:"form-field-error",children:u.email})]})]})]}),e.jsxs("section",{className:"cuentas-seccion",children:[e.jsxs("div",{className:"cuentas-header",children:[e.jsx("h2",{children:"Cuentas"}),e.jsxs("button",{type:"button",className:"add-btn",onClick:_,children:[e.jsx(js,{})," Agregar Cuenta"]})]}),e.jsx("div",{className:"grid-cuentas",children:a.map((c,m)=>e.jsxs("div",{className:"cuenta-card",children:[e.jsxs("div",{className:"cuenta-card-actions",children:[e.jsx("button",{type:"button",onClick:()=>k(m),className:"icon-btn-card",children:e.jsx(Ss,{})}),e.jsx("button",{type:"button",onClick:()=>x(m),className:"icon-btn-card delete",children:e.jsx(fs,{})})]}),e.jsx("div",{className:"cuenta-card-header",children:e.jsx("strong",{children:c.email})}),e.jsxs("div",{className:"cuenta-card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Ciudad:"})," ",c.ciudad||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Zip:"})," ",c.zipCode||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Asesor:"})," ",c.asesor||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Vendido:"})," ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(c.vendido||0)]})]})]},m))})]}),e.jsx("button",{type:"submit",className:"submit-btn",disabled:C,children:C?"Guardando...":"Guardar Cliente"})]}),e.jsx(gs,{isOpen:h,onClose:v,children:e.jsxs("div",{className:"modal-form",children:[e.jsx("h3",{children:g!==null?"Editar Cuenta":"Nueva Cuenta"}),e.jsxs("div",{className:"form-grid",children:[e.jsx("input",{name:"email",value:r.email,onChange:R,placeholder:"Email de la cuenta",required:!0}),e.jsx("input",{name:"zipCode",value:r.zipCode,onChange:R,placeholder:"Zip Code"}),e.jsx("input",{name:"ciudad",value:r.ciudad,onChange:R,placeholder:"Ciudad"}),e.jsx("input",{name:"asesor",value:r.asesor,onChange:R,placeholder:"Asesor"}),e.jsx("input",{type:"text",name:"vendido",value:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(r.vendido||0),onChange:R,placeholder:"Vendido ($)"})]}),e.jsxs("div",{className:"modal-form-actions",children:[e.jsx("button",{type:"button",onClick:L,className:"button-primary",children:g!==null?"Actualizar Cuenta":"Confirmar y Agregar"}),e.jsx("button",{type:"button",onClick:v,className:"button-secondary",children:"Cancelar"})]})]})})]})},ys=()=>e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"})}),Cs=()=>e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"3 6 5 6 21 6"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),Ns=()=>{const{data:t,error:s,isLoading:a,isFetching:n}=Ze(),[r]=ss(),[o,g]=i.useState(""),S=(l,h)=>{I.fire({title:`¿Eliminar a ${h}?`,text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(f=>{f.isConfirmed&&r(l).unwrap().then(()=>{}).catch(y=>{I.fire("Error","No se pudo eliminar el cliente.","error"),console.error(y)})})};if(a||n)return e.jsx("div",{className:"loading-container",children:"Cargando clientes..."});if(s)return e.jsx("div",{className:"error-container",children:"Error al cargar los clientes. Por favor, intente de nuevo."});const u=(t==null?void 0:t.filter(l=>l.nombre.toLowerCase().includes(o.toLowerCase())||l.email&&l.email.toLowerCase().includes(o.toLowerCase())))||[];return e.jsxs("div",{className:"lista-clientes-container",children:[e.jsxs("div",{className:"lista-header",children:[e.jsx("h1",{children:"Lista de Clientes"}),e.jsx("div",{className:"search-container",children:e.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",className:"search-input",value:o,onChange:l=>g(l.target.value)})}),e.jsx(w,{to:"/nuevocliente",className:"button-primary",children:"Crear Nuevo Cliente"})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"clientes-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Nombre"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Teléfono"}),e.jsx("th",{children:"Cuentas"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:u.length>0?u.map(l=>e.jsxs("tr",{children:[e.jsx("td",{"data-label":"Nombre",children:l.nombre}),e.jsx("td",{"data-label":"Email",children:l.email||"-"}),e.jsx("td",{"data-label":"Teléfono",children:l.telefono||"-"}),e.jsx("td",{"data-label":"Cuentas",className:"cuentas-cell",children:l.cuentas.length>0?l.cuentas.map((h,f)=>e.jsxs("div",{className:"cuenta-pill-container",children:[e.jsx("span",{className:"cuenta-pill",children:h.email}),e.jsxs("div",{className:"cuenta-tooltip",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Ciudad:"})," ",h.ciudad||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Zip:"})," ",h.zipCode||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Asesor:"})," ",h.asesor||"N/A"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Vendido:"})," ",new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(h.vendido||0)]})]})]},f)):e.jsx("span",{children:"-"})}),e.jsx("td",{"data-label":"Acciones",children:e.jsxs("div",{className:"action-buttons",children:[e.jsx(w,{to:`/clientes/editar/${l._id}`,className:"action-btn edit-btn",children:e.jsx(ys,{})}),e.jsx("button",{onClick:()=>S(l._id,l.nombre),className:"action-btn delete-btn",children:e.jsx(Cs,{})})]})})]},l._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"no-data-cell",children:o?"No se encontraron clientes.":"No hay clientes registrados."})})})]})})]})},vs=Ce(Ne(e.jsxs(A,{path:"/",element:e.jsx($e,{}),children:[e.jsx(A,{index:!0,element:e.jsx(hs,{})}),e.jsx(A,{path:"/signin",element:e.jsx(us,{})}),e.jsx(A,{path:"/register",element:e.jsx(ms,{})}),e.jsx(A,{path:"",element:e.jsx(ds,{}),children:e.jsx(A,{path:"/profile",element:e.jsx(ps,{})})}),e.jsx(A,{path:"/enconstruccion",element:e.jsx(xs,{})}),e.jsx(A,{path:"/nuevocliente",element:e.jsx(Es,{})}),e.jsx(A,{path:"/listaclientes",element:e.jsx(Ns,{})})]})));Ee.createRoot(document.getElementById("root")).render(e.jsx(be,{store:fe,children:e.jsx(Se.StrictMode,{children:e.jsx(ve,{router:vs})})}));
