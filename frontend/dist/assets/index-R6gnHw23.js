import{r as o,j as e,R as fe}from"./react-DOKUib4L.js";import{R as Ee}from"./react-dom-BITIQLb-.js";import{L as C,O as K,N as je,u as W,a as J,c as ye,b as Ne,R as Re,d as U}from"./react-router-CSgxTpBU.js";import{a as b,c as q,P as Ue}from"./react-redux-C2QVzL3I.js";import{a as M}from"./axios-xsH4HHeE.js";import{U as ve,a as _,L as Ce,b as be,M as z,c as P,E as L,d as O,F as Ie,P as Z,S as Ae,H as Te,e as we,f as _e,T as Pe}from"./lucide-react-BG1KbL-Y.js";import{c as ee,f as se,a as Le,b as Oe,s as De}from"./@reduxjs-DTCXBYW2.js";import{S as w}from"./sweetalert2-9Qm2jZ7z.js";import{u as Fe,a as ke}from"./react-hook-form-DlQL9q1J.js";import"./cookie-BX9QSSmL.js";import"./scheduler-SPyfQU6S.js";import"./use-sync-external-store-ruIS0Fp4.js";import"./redux-BXkGT1VS.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./@standard-schema-DjkmAgHD.js";import"./reselect-utOO-l3Z.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=a(r);fetch(r.href,i)}})();const te="USER_REGISTER_REQUEST",re="USER_REGISTER_SUCCESS",ae="USER_REGISTER_FAIL",Ge="USER_REGISTER_RESET",ne="USER_SIGNIN_REQUEST",V="USER_SIGNIN_SUCCESS",ie="USER_SIGNIN_FAIL",qe="USER_SIGNIN_RESET",oe="USER_SIGNOUT",le="USER_DETAILS_REQUEST",ce="USER_DETAILS_SUCCESS",ue="USER_DETAILS_FAIL",Me="USER_DETAILS_RESET",ze="USER_LIST_REQUEST",Ve="USER_LIST_SUCCESS",Qe="USER_LIST_FAIL",de="USER_UPDATE_PROFILE_REQUEST",pe="USER_UPDATE_PROFILE_SUCCESS",me="USER_UPDATE_PROFILE_FAIL",T="USER_UPDATE_PROFILE_RESET",He="USER_UPDATE_REQUEST",Ye="USER_UPDATE_SUCCESS",Be="USER_UPDATE_FAIL",$e="USER_UPDATE_RESET",Xe=(t,s,a)=>async n=>{n({type:te,payload:{nombre:t,email:s,password:a}});try{const{data:r}=await M.post("/api/users/register",{nombre:t,email:s,password:a});n({type:re,payload:r}),n({type:V,payload:r}),localStorage.setItem("userInfo",JSON.stringify(r))}catch(r){n({type:ae,payload:r.response&&r.response.data.message?r.response.data.message:r.message})}},We=(t,s)=>async a=>{a({type:ne,payload:{email:t,password:s}});try{const{data:n}=await M.post("/api/users/signin",{email:t,password:s});a({type:V,payload:n}),localStorage.setItem("userInfo",JSON.stringify(n))}catch(n){a({type:ie,payload:n.response&&n.response.data.message?n.response.data.message:n.message})}},Ke=()=>t=>{localStorage.removeItem("userInfo"),localStorage.removeItem("cartItems"),localStorage.removeItem("shippingAddress"),t({type:oe}),document.location.href="/signin"},Je=t=>async(s,a)=>{s({type:le,payload:t});const{userSignin:{userInfo:n}}=a();try{const{data:r}=await M.get(`/api/users/${t}`,{headers:{Authorization:`Bearer ${n.token}`}});s({type:ce,payload:r})}catch(r){const i=r.response&&r.response.data.message?r.response.data.message:r.message;s({type:ue,payload:i})}},Ze=t=>async(s,a)=>{s({type:de,payload:t});const{userSignin:{userInfo:n}}=a();try{const{data:r}=await M.put("/api/users/profile",t,{headers:{Authorization:`Bearer ${n.token}`}});s({type:pe,payload:r}),s({type:V,payload:r}),localStorage.setItem("userInfo",JSON.stringify(r))}catch(r){const i=r.response&&r.response.data.message?r.response.data.message:r.message;s({type:me,payload:i})}};function es(){const t=b(c=>c.userSignin),{userInfo:s}=t,a=q(),[n,r]=o.useState(!1),[i,l]=o.useState(()=>document.body.getAttribute("data-theme")||"light"),f=()=>{r(!1),a(Ke())},h=()=>{l(c=>{const S=c==="light"?"dark":"light";return S==="dark"?document.body.setAttribute("data-theme","dark"):document.body.removeAttribute("data-theme"),S})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"display-grid",children:[e.jsx("div",{className:"header",children:e.jsxs("div",{className:"header-container",children:[e.jsx("h1",{className:"header-title",children:e.jsx(C,{to:"/",className:"header-title-link",children:"USA App"})}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{onClick:h,className:"theme-button icon-button","aria-label":"Cambiar tema",children:i==="light"?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("circle",{cx:"12",cy:"12",r:"5"}),e.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),e.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),e.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),e.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),e.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),e.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),e.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),e.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})})}),s?e.jsxs(e.Fragment,{children:[e.jsxs(C,{to:"/nuevocliente",className:"button-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx(ve,{size:18}),e.jsx("span",{children:"Nuevo Cliente"})]}),e.jsxs("div",{className:"user-menu-container",children:[e.jsxs("button",{onClick:()=>r(!n),className:"user-menu-button",children:[e.jsx("span",{children:s.name}),e.jsx("div",{className:"avatar",children:s.nombre.charAt(0)})]}),n&&e.jsxs("div",{className:"dropdown-menu",children:[e.jsxs(C,{to:"/profile",className:"dropdown-item",onClick:()=>r(!1),children:[e.jsx(_,{size:18}),e.jsx("span",{children:"Ver Perfil"})]}),e.jsxs("button",{onClick:f,className:"dropdown-item",children:[e.jsx(Ce,{size:18}),e.jsx("span",{children:"Cerrar Sesión"})]})]})]})]}):e.jsx(C,{to:"/signin",className:"theme-button icon-button","aria-label":"Iniciar Sesión",children:e.jsx(be,{size:22})})]})]})}),e.jsx("div",{className:"main",children:e.jsx("div",{className:"main-content",children:e.jsx(K,{})})}),e.jsx("div",{className:"footer",children:e.jsx("div",{className:"footer-container",children:e.jsxs("span",{children:["© ",new Date().getFullYear()," mr.F-dev. Todos los derechos reservados."]})})})]})})}const G=ee({reducerPath:"clienteApi",baseQuery:se({baseUrl:"/api",prepareHeaders:(t,{getState:s})=>{const a=s().userSignin.userInfo.token;return a&&t.set("Authorization",`Bearer ${a}`),t}}),tagTypes:["Cliente"],endpoints:t=>({getClientes:t.query({query:()=>"/clientes",providesTags:s=>s?[...s.map(({_id:a})=>({type:"Cliente",id:a})),{type:"Cliente",id:"LIST"}]:[{type:"Cliente",id:"LIST"}]}),getCliente:t.query({query:s=>`/clientes/${s}`,providesTags:(s,a,n)=>[{type:"Cliente",id:n}]}),newCliente:t.mutation({query:s=>({url:"/clientes/register",method:"POST",body:s}),invalidatesTags:[{type:"Cliente",id:"LIST"}]}),updateCliente:t.mutation({query:({id:s,...a})=>({url:`/clientes/${s}`,method:"PUT",body:a}),invalidatesTags:(s,a,{id:n})=>[{type:"Cliente",id:n},{type:"Cliente",id:"LIST"}]}),deleteCliente:t.mutation({query:s=>({url:`/clientes/${s}`,method:"DELETE"}),invalidatesTags:(s,a,n)=>[{type:"Cliente",id:n}]})})}),{useNewClienteMutation:ss}=G,ge=Le({name:"splash",initialState:{isVisible:sessionStorage.getItem("splashShown")!=="true"},reducers:{hideSplash:t=>{t.isVisible=!1,sessionStorage.setItem("splashShown","true")}}}),{hideSplash:Os}=ge.actions,ts=ge.reducer,rs=(t={},s)=>{switch(s.type){case te:return{loading:!0};case re:return{loading:!1,userInfo:s.payload};case ae:return{loading:!1,error:s.payload};default:return t}},as=(t={},s)=>{switch(s.type){case ne:return{loading:!0};case V:return{loading:!1,userInfo:s.payload};case ie:return{loading:!1,error:s.payload};case oe:return{};case qe:return{};default:return t}},ns=(t={loading:!0},s)=>{switch(s.type){case le:return{loading:!0};case ce:return{loading:!1,user:s.payload};case ue:return{loading:!1,error:s.payload};case Me:return{loading:!0};default:return t}},is=(t={},s)=>{switch(s.type){case de:return{loading:!0};case pe:return{loading:!1,success:!0};case me:return{loading:!1,error:s.payload};case T:return{};default:return t}},os=(t={},s)=>{switch(s.type){case He:return{loading:!0};case Ye:return{loading:!1,success:!0};case Be:return{loading:!1,error:s.payload};case $e:return{};default:return t}},ls=(t={loading:!0,users:[]},s)=>{switch(s.type){case ze:return{loading:!0};case Ve:return{loading:!1,vendedores:s.payload};case Qe:return{loading:!1,error:s.payload};default:return t}},B=ee({reducerPath:"usersApi",baseQuery:se({baseUrl:"/api",prepareHeaders:(t,{getState:s})=>{const a=s().userSignin.userInfo.token;return a&&t.set("authorization",`Bearer ${a}`),t}}),endpoints:t=>({getUsers:t.query({query:()=>"/users"}),getUser:t.query({query:s=>`/user/${s}`}),registerUser:t.mutation({query:(s,a,n)=>({url:"/users/register",method:"POST",body:{nombre:s,email:a,password:n}}),invalidatesTags:["Users"]})})}),cs={userSignin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},he=Oe({reducer:{splash:ts,userSignin:as,userRegister:rs,userDetails:ns,userUpdateProfile:is,userUpdate:os,userList:ls,[G.reducerPath]:G.reducer,[B.reducerPath]:B.reducer},middleware:t=>t().concat(G.middleware,B.middleware),preloadedState:cs});De(he.dispatch);const us=()=>{const t=b(a=>a.userSignin),{userInfo:s}=t;return s?e.jsx(K,{}):e.jsx(je,{to:"/signin"})};function ds(){const t=W(),[s,a]=o.useState(""),[n,r]=o.useState(""),[i,l]=o.useState(!1),{search:f}=J(),h=new URLSearchParams(f).get("redirect"),c=h||"/",S=b(p=>p.userSignin),{userInfo:x,loading:y,error:E}=S,g=q(),d=p=>{p.preventDefault(),g(We(s,n))};return o.useEffect(()=>{x&&t(c)},[t,c,x]),e.jsx("div",{className:"form-container",children:e.jsxs("form",{className:"form-card card",onSubmit:d,children:[e.jsx("h1",{className:"form-title",children:"Iniciar Sesión"}),E&&e.jsx("div",{className:"form-error",children:E}),e.jsxs("div",{className:"input-group",children:[e.jsx(z,{className:"input-icon",size:20}),e.jsx("input",{type:"email",id:"email",placeholder:"Correo electrónico",required:!0,onChange:p=>a(p.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(P,{className:"input-icon",size:20}),e.jsx("input",{type:i?"text":"password",id:"password",placeholder:"Contraseña",required:!0,onChange:p=>r(p.target.value)}),e.jsx("button",{type:"button",className:"password-toggle-button",onClick:()=>l(!i),children:i?e.jsx(L,{size:20}):e.jsx(O,{size:20})})]}),e.jsx("button",{className:"button-primary form-submit-button",type:"submit",disabled:y,children:y?"Iniciando...":"Entrar"}),e.jsxs("div",{className:"form-link",children:["¿Nuevo por aquí?"," ",e.jsx(C,{to:`/register?redirect=${c}`,children:"Crea una cuenta"})]})]})})}function ps(){const t=W(),[s,a]=o.useState(""),[n,r]=o.useState(""),[i,l]=o.useState(""),[f,h]=o.useState(""),[c,S]=o.useState(!1),[x,y]=o.useState(!1),[E,g]=o.useState(null),{search:d}=J(),p=new URLSearchParams(d).get("redirect"),N=p||"/",D=b(m=>m.userRegister),{userInfo:I,loading:F,error:v}=D,A=q(),Q=m=>{m.preventDefault(),i!==f?g("Las contraseñas no coinciden"):(g(null),A(Xe(s,n,i)))};return o.useEffect(()=>{I&&t(N)},[t,N,I]),o.useEffect(()=>{if(v){const m=setTimeout(()=>{A({type:Ge})},4e3);return()=>clearTimeout(m)}},[A,v]),e.jsx("div",{className:"form-container",children:e.jsxs("form",{className:"form-card",onSubmit:Q,children:[e.jsx("h2",{className:"form-title",children:"Crear Cuenta"}),e.jsxs("div",{className:"input-group",children:[e.jsx(_,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Nombre",required:!0,value:s,onChange:m=>a(m.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(z,{className:"input-icon"}),e.jsx("input",{type:"email",placeholder:"Email",required:!0,value:n,onChange:m=>r(m.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(P,{className:"input-icon"}),e.jsx("input",{type:c?"text":"password",placeholder:"Clave",required:!0,value:i,onChange:m=>l(m.target.value)}),e.jsx("button",{type:"button",className:"password-toggle-button",onClick:()=>S(!c),children:c?e.jsx(L,{}):e.jsx(O,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(P,{className:"input-icon"}),e.jsx("input",{type:x?"text":"password",placeholder:"Confirmar Clave",required:!0,value:f,onChange:m=>h(m.target.value)}),e.jsx("button",{type:"button",className:"password-toggle-button",onClick:()=>y(!x),children:x?e.jsx(L,{}):e.jsx(O,{})})]}),(v||E)&&e.jsx("div",{className:"form-error",children:v||E}),e.jsx("button",{type:"submit",className:"button-primary form-submit-button",disabled:F,children:F?"Registrando...":"Crear Cuenta"}),e.jsxs("div",{className:"form-link",children:["¿Ya tienes una cuenta?"," ",e.jsx(C,{to:`/signin?redirect=${N}`,children:"Inicia Sesión"})]})]})})}const $="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAANlBMVEVFRUVAQEA6Ojo1NTUxMTGFhYaVlZehoqOysrMkJCTh4eLr6+vU1NXExMVsbG1cXF0VFRVQUFASrDoiAAACRUlEQVR42rXT247rIAwFUNsY2+Hm+P9/9gBJm4w0mrezFRUVFhuqKpD+CN9J84HX9B8+MXy3XsPjn4U9CbsKAgLnAEi0F4kuiBFX1QW9t9YMeKiKSh5Os2RR0FI6Mm1IxN5KrUWYwof0UpoO2qW51donSfSCrY3jPM+Dcq+l50jErnOhE29IROlqbAYp8cRgrWv2hNluOLMgjwVr6znRTDpYuqoEivY6YbohfqGNRCtTqkhGD3lDSqO3qla7SRDhkiAiOu+sG+LdSAtmL8004/qOxEMnDf4NnrmZ6VgOMYWo6Ehayxcipg0Psv0Tlps466S0GvGCiHcjs3ebcjOiBRUWhL31BZHzhJYJkRzGgvErhESiYt2JXGNBc63lgXBDRA5VawakfUN9w5kbwpRjwiK59XgfDRviCxKJ9VKmPbLOoJbn6HcjsFtvs4VZphO+IGz4NM4g59ZKHWeYqY1jQ1wL68Eb7na0VvXg3E0V+QNx4Rsm2PdgL42OsG6zkC643bvxPnyB1rsy4wfCj8aPPDmX1gwO/MA7T+MOk9RaepwEX4hfWPJx/6EwrNZqcCaA5+gHWh4e4SNrm3XjmH3wa+M6zVTVTLMf54GwYa0LfuNXIgAT75f7uzCCH0fnKwcTLYcEgGtXgifhQBQwH4zdAwg+AgEj6GEYpuoknky8O2fVTGsuEFV/QKUsyYOmMEcjMAhlyeyr4Q1dMwFCFhEn86EYCjp2+euOkSXDypjx5Dp1iGTE7DEQniDSNc7sTwIkpHviP+UfbJwh+oK7LY4AAAAASUVORK5CYII=";function ms(){const[t,s]=o.useState(""),[a,n]=o.useState(""),[r,i]=o.useState(""),[l,f]=o.useState(""),[h,c]=o.useState(""),[S,x]=o.useState(""),[y,E]=o.useState(""),[g,d]=o.useState(!1),[p,N]=o.useState(!1),[D,I]=o.useState(null),F=b(u=>u.userSignin),{userInfo:v}=F,A=b(u=>u.userDetails),{loading:Q,error:m,user:R}=A,Se=b(u=>u.userUpdateProfile),{success:H,error:k,loading:Y}=Se,j=q();o.useEffect(()=>{R?(s(R.nombre||" "),n(R.email||" "),c(R.apellido||" "),x(R.cedula||" "),E(R.telefono||" ")):(j({type:T}),j(Je(v._id)))},[j,v._id,R,H]);const xe=u=>{u.preventDefault(),r!==l?I("Las contraseñas no coinciden"):(I(null),j(Ze({userId:R._id,nombre:t,email:a,password:r,apellido:h,cedula:S,telefono:y})))};return o.useEffect(()=>{H&&(w.fire({title:"Datos Actualizado con Exito!",text:"Editar Perfil",imageUrl:$,imageWidth:70,imageHeight:70,imageAlt:"logo"}),j({type:T}))},[j,H]),o.useEffect(()=>{k&&(w.fire({title:"error",text:"Editar Perfil",imageUrl:$,imageWidth:70,imageHeight:70,imageAlt:"logo"}),j({type:T}))},[j,k]),o.useEffect(()=>{m&&(w.fire("Ocurrio un Error al Actualizar!","",m),j({type:T}))},[j,m]),e.jsx("div",{className:"signin-container",children:e.jsxs("form",{className:"signin-form",onSubmit:xe,style:{gap:"1rem"},children:[e.jsx("img",{src:$,alt:"Logo",className:"signin-logo"}),e.jsx("h2",{children:"Perfil de Usuario"}),Q?e.jsx("p",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"input-group",children:[e.jsx(_,{className:"input-icon"}),e.jsx("input",{id:"nombre",type:"text",placeholder:"Nombre",value:t,onChange:u=>s(u.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(_,{className:"input-icon"}),e.jsx("input",{id:"apellido",type:"text",placeholder:"Apellido",value:h,onChange:u=>c(u.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(z,{className:"input-icon"}),e.jsx("input",{id:"email",type:"email",placeholder:"Email",value:a,onChange:u=>n(u.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(P,{className:"input-icon"}),e.jsx("input",{id:"password",type:g?"text":"password",placeholder:"Nueva clave (opcional)",onChange:u=>i(u.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>d(!g),children:g?e.jsx(L,{}):e.jsx(O,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(P,{className:"input-icon"}),e.jsx("input",{id:"confirmPassword",type:p?"text":"password",placeholder:"Confirmar nueva clave",onChange:u=>f(u.target.value)}),e.jsx("button",{type:"button",className:"password-toggle",onClick:()=>N(!p),children:p?e.jsx(L,{}):e.jsx(O,{})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Ie,{className:"input-icon"}),e.jsx("input",{id:"cedula",type:"text",placeholder:"Cédula",value:S,onChange:u=>x(u.target.value)})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(Z,{className:"input-icon"}),e.jsx("input",{id:"telefono",type:"text",placeholder:"Teléfono",value:y,onChange:u=>E(u.target.value)})]}),(k||D)&&e.jsx("p",{className:"signin-error",children:k||D}),e.jsx("div",{className:"form-actions",children:e.jsxs("button",{type:"submit",className:"signin-button",disabled:Y,children:[Y?e.jsx("div",{className:"spinner"}):e.jsx(Ae,{}),e.jsx("span",{children:Y?"Actualizando...":"Actualizar Perfil"})]})})]})]})})}function gs(){return e.jsx("div",{children:e.jsx("h1",{children:"HOME SECTION"})})}const X={container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"calc(100vh - 200px)",textAlign:"center",backgroundColor:"#f8f9fa",borderRadius:"8px",margin:"1rem",padding:"2rem",color:"#495057"},title:{fontSize:"2.5rem",fontWeight:"bold",marginTop:"1rem"},text:{fontSize:"1.1rem",maxWidth:"500px",lineHeight:"1.6"}};function hs(){return e.jsxs("div",{style:X.container,children:[e.jsx(Te,{size:64,color:"#ffc107"}),e.jsx("h1",{style:X.title,children:"Página en Construcción"}),e.jsxs("p",{style:X.text,children:["Estamos trabajando para tener esta sección lista lo antes posible.",e.jsx("br",{}),"Ofrecemos disculpas por las molestias."]}),e.jsx(C,{to:"/",className:"header-login-button",style:{marginTop:"2rem"},children:"Volver al Inicio"})]})}function Ss(){const t=W(),[s,{isLoading:a,isSuccess:n,isError:r,error:i}]=ss(),{register:l,control:f,handleSubmit:h,formState:{errors:c}}=Fe({defaultValues:{nombre:"",direccion:"",telefono:"",email:"",cuentas:[]}}),{fields:S,append:x,remove:y}=ke({control:f,name:"cuentas"}),E=async g=>{try{await s(g).unwrap()}catch{}};return o.useEffect(()=>{var g;n&&w.fire({icon:"success",title:"¡Éxito!",text:"Cliente creado con éxito",timer:2e3,showConfirmButton:!1}).then(()=>{t("/clientes")}),r&&w.fire({icon:"error",title:"Error",text:((g=i==null?void 0:i.data)==null?void 0:g.message)||"Ocurrió un error al crear el cliente"})},[n,r,i,t]),e.jsx("div",{className:"main-content",children:e.jsxs("form",{onSubmit:h(E),className:"form-card",style:{maxWidth:"800px",margin:"0 auto"},children:[e.jsx("h2",{className:"form-title",children:"Crear Nuevo Cliente"}),e.jsxs("div",{className:"input-group",children:[e.jsx(_,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Nombre Completo",...l("nombre",{required:"El nombre es obligatorio"})})]}),c.nombre&&e.jsx("p",{className:"form-error-inline",children:c.nombre.message}),e.jsxs("div",{className:"input-group",children:[e.jsx(we,{className:"input-icon"}),e.jsx("input",{type:"text",placeholder:"Dirección",...l("direccion",{required:"La dirección es obligatoria"})})]}),c.direccion&&e.jsx("p",{className:"form-error-inline",children:c.direccion.message}),e.jsxs("div",{className:"input-group",children:[e.jsx(Z,{className:"input-icon"}),e.jsx("input",{type:"tel",placeholder:"Teléfono",...l("telefono")})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(z,{className:"input-icon"}),e.jsx("input",{type:"email",placeholder:"Email Principal",...l("email",{pattern:{value:/^\S+@\S+$/i,message:"Formato de email inválido"}})})]}),c.email&&e.jsx("p",{className:"form-error-inline",children:c.email.message}),e.jsxs("div",{className:"cuentas-section",children:[e.jsxs("div",{className:"cuentas-header",children:[e.jsx("h3",{children:"Cuentas Asociadas"}),e.jsx("button",{type:"button",className:"icon-button",onClick:()=>x({email:"",creado:new Date().toISOString().split("T")[0],aprobado:"",zipCode:"",ciudad:"",asesor:"",vendido:0}),children:e.jsx(_e,{})})]}),S.map((g,d)=>{var p,N;return e.jsxs("div",{className:"cuenta-card",children:[e.jsx("input",{placeholder:"Email de la cuenta",...l(`cuentas.${d}.email`,{required:"El email es obligatorio"})}),((N=(p=c.cuentas)==null?void 0:p[d])==null?void 0:N.email)&&e.jsx("p",{className:"form-error-inline",children:c.cuentas[d].email.message}),e.jsx("input",{type:"date",...l(`cuentas.${d}.creado`)}),e.jsx("input",{type:"date",...l(`cuentas.${d}.aprobado`)}),e.jsx("input",{placeholder:"Zip Code",...l(`cuentas.${d}.zipCode`)}),e.jsx("input",{placeholder:"Ciudad",...l(`cuentas.${d}.ciudad`)}),e.jsx("input",{placeholder:"Asesor",...l(`cuentas.${d}.asesor`)}),e.jsx("input",{type:"number",placeholder:"Vendido ($)",...l(`cuentas.${d}.vendido`,{valueAsNumber:!0})}),e.jsx("button",{type:"button",className:"icon-button danger",onClick:()=>y(d),children:e.jsx(Pe,{size:20})})]},g.id)})]}),e.jsx("button",{type:"submit",className:"button-primary form-submit-button",disabled:a,children:a?"Guardando...":"Guardar Cliente"})]})})}const xs=ye(Ne(e.jsxs(U,{path:"/",element:e.jsx(es,{}),children:[e.jsx(U,{index:!0,element:e.jsx(gs,{})}),e.jsx(U,{path:"/signin",element:e.jsx(ds,{})}),e.jsx(U,{path:"/register",element:e.jsx(ps,{})}),e.jsx(U,{path:"",element:e.jsx(us,{}),children:e.jsx(U,{path:"/profile",element:e.jsx(ms,{})})}),e.jsx(U,{path:"/enconstruccion",element:e.jsx(hs,{})}),e.jsx(U,{path:"/nuevocliente",element:e.jsx(Ss,{})})]})));Ee.createRoot(document.getElementById("root")).render(e.jsx(Ue,{store:he,children:e.jsx(fe.StrictMode,{children:e.jsx(Re,{router:xs})})}));
